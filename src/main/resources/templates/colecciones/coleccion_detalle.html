<html th:replace="~{layout/base :: html}">

<div th:fragment="contenido">
    <!-- Embed de datos -->
    <script th:inline="javascript">
        /*<![CDATA[*/
        const hechos = /*[[${hechos}]]*/ [];
        /*]]>*/
    </script>

    <div class="container my-5">

        <!-- Título de la colección -->
        <section class="mb-4 text-center">
            <h1 class="display-5" th:text="${titulo}">Colección: Título de la colección</h1>
            <p class="text-muted" th:text="${descripcion}">Explora los hechos asociados a esta colección.</p>
        </section>

        <!-- Modo de navegación -->
        <section class="text-center mb-4">
            <button id="modo-curado" class="btn btn-primary me-2">Modo Curado</button>
            <button id="modo-irrestricto" class="btn btn-outline-primary">Modo Irrestricto</button>
        </section>


        <!-- Filtros -->
        <section class="card mb-4 shadow-sm">
            <div class="card-body">
                <h5 class="card-title">Filtros</h5>
                <form id="filtros-form" class="row g-3">

                    <!-- Fecha TODO modificar para que sea Desde-Hasta -->
                    <div class="col-md-3">
                        <label for="filtro-fecha" class="form-label">Fecha</label>
                        <input type="date" id="filtro-fecha" class="form-control">
                    </div>

                    <!-- Ubicación -->
                    <div class="col-md-3">
                        <label for="filtro-ubicacion" class="form-label">Ubicación</label>
                        <input type="text" id="filtro-ubicacion" class="form-control" placeholder="Ej: Buenos Aires">
                    </div>

                    <!-- Categoría -->
                    <div class="col-md-3">
                        <label for="filtro-categoria" class="form-label">Categoría</label>
                        <select id="filtro-categoria" class="form-select">
                            <option value="">Todas</option>
                            <option value="inundacion">Inundación</option>
                            <option value="incendio">Incendio</option>
                            <option value="terremoto">Terremoto</option>
                            <option value="lluvia">Lluvia</option>
                        </select>
                    </div>

                    <!-- Fuente (cambiado a select) -->
                    <div class="col-md-3">
                        <label for="filtro-fuente" class="form-label">Fuente</label>
                        <select id="filtro-fuente" class="form-select">
                            <option value="">Todas</option>
                            <option value="diario-ejemplo">Diario Ejemplo</option>
                            <option value="agencia-noticias">Agencia Noticias</option>
                            <option value="radio-local">Radio Local</option>
                            <option value="portal-web">Portal Web</option>
                        </select>
                    </div>

                    <!-- Botón aplicar -->
                    <div class="col-12 text-end">
                        <button type="submit" class="btn btn-success">Aplicar filtros</button>
                    </div>
                </form>
            </div>
        </section>


        <!-- Mapa -->
        <section class="mb-4">
            <h4>Mapa de hechos</h4>
            <div id="mapa-coleccion" style="height: 500px; width: 100%; border-radius: 0.5rem;"></div>
        </section>

        <div th:if="${hechos.empty}">
            No hay hechos en esta colección
        </div>
        <!-- Listado de hechos -->
        <section th:unless="${hechos.empty}">
            <h4>Listado de Hechos</h4>
            <ul id="lista-hechos" class="list-group">
                <li th:each="hecho : ${hechos}" class="list-group-item">
                    <h5 th:text="${hecho.titulo}">Título ejemplo</h5>
                    <p class="mb-1">Fuente: Agregar atributo fuente en los hechos para esto</p>
                    <small th:text="${'Fecha: ' + hecho.fecha_hecho + ' | Categoría: ' + hecho.categoria}">Fecha: no encontrada | Categoría: no encontrada </small>
                    <br>
                    <a href="../hechos/hecho_detalle.html?id=1" class="btn btn-sm btn-outline-primary mt-2">Ver detalle</a>
                </li>
            </ul>
        </section>

    </div>

    <!-- Bootstrap JS CDN -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
    <script th:src="@{/js/coleccion_detalle.js}"></script>
</div>
</html>
